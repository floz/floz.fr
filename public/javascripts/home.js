// Generated by CoffeeScript 1.6.2
var Home,
  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Home = (function(_super) {
  __extends(Home, _super);

  Home.first = true;

  function Home() {
    this._onProjectClick = __bind(this._onProjectClick, this);
    var $element, element, _i, _len, _ref;

    Home.__super__.constructor.call(this, "#home");
    _ref = this._$module.find(".scrolling_content");
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      element = _ref[_i];
      $element = $(element);
      $element.css({
        "top": $element.height()
      });
    }
    return;
  }

  Home.prototype._showBot = function(delay) {
    var $project, $projects, delayAdd, p, project, _i, _len;

    if (delay == null) {
      delay = 0;
    }
    Home.__super__._showBot.call(this, delay);
    delay = 0;
    delayAdd = .1;
    $projects = this._$module.find("article.bot li");
    for (_i = 0, _len = $projects.length; _i < _len; _i++) {
      project = $projects[_i];
      $project = $(project);
      p = new ProjectPreview($project);
      p.show(delay + .1);
      delay += delayAdd;
      delayAdd *= .92;
      if (delayAdd < .05) {
        delayAdd = .05;
      }
      $project.find("a").click(this._onProjectClick);
    }
    return Home.first = false;
  };

  Home.prototype._onProjectClick = function(e) {
    var href, projectName;

    e.preventDefault();
    href = e.currentTarget.href;
    projectName = href.split("/").pop();
    return navManager.get().set(href, "/projects_ajax/" + projectName);
  };

  return Home;

})(Module);
