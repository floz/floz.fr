// Generated by CoffeeScript 1.6.2
var ProjectImg,
  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

ProjectImg = (function() {
  ProjectImg.prototype.widthImgOrigin = 0;

  ProjectImg.prototype.heightImgOrigin = 0;

  function ProjectImg($cntImg, $ref) {
    this.$cntImg = $cntImg;
    this.$ref = $ref;
    this.resize = __bind(this.resize, this);
    this.onImageLoaded = __bind(this.onImageLoaded, this);
    this.img = new Image();
    this.$img = $(this.img);
  }

  ProjectImg.prototype.startLoad = function() {
    this.img.src = this.$cntImg.attr("data-url_img");
    return this.$img.load(this.onImageLoaded);
  };

  ProjectImg.prototype.onImageLoaded = function() {
    this.$img.css("opacity", 0);
    this.$cntImg.append(this.img);
    this.widthImgOrigin = this.$img.width();
    this.heightImgOrigin = this.$img.height();
    $(window).resize(this.resize);
    this.resize();
    return TweenLite.to(this.img, .3, {
      autoAlpha: 1,
      easing: Quad.easeOut
    });
  };

  ProjectImg.prototype.resize = function() {
    var ratio, rh, rw;

    rw = this.$ref.width() / this.widthImgOrigin;
    rh = this.$ref.height() / this.heightImgOrigin;
    ratio = rw > rh ? rw : rh;
    this.$img.width(this.widthImgOrigin * ratio);
    this.$img.height(this.heightImgOrigin * ratio);
    return this.$img.css({
      top: this.$ref.height() - this.$img.height() >> 1,
      left: this.$ref.width() - this.$img.width() >> 1
    });
  };

  return ProjectImg;

})();
